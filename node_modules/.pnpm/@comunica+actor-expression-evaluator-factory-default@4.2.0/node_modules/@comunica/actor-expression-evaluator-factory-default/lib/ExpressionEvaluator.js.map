{"version":3,"file":"ExpressionEvaluator.js","sourceRoot":"","sources":["ExpressionEvaluator.ts"],"names":[],"mappings":";;;AAEA,+DAA0D;AAI1D,2DAAwD;AAExD,MAAa,mBAAmB;IAE9B,YACkB,OAAuB,EACvB,IAAgB,EAChB,uBAAgD,EAChD,sBAA8C,EAC9C,eAAgC;QAJhC,YAAO,GAAP,OAAO,CAAgB;QACvB,SAAI,GAAJ,IAAI,CAAY;QAChB,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,oBAAe,GAAf,eAAe,CAAiB;QAEhD,IAAI,CAAC,iBAAiB;YACpB,IAAI,qCAAiB,CAAC,OAAO,EAAE,uBAAuB,EAAE,sBAAsB,EAAE,eAAe,CAAC,CAAC;IACrG,CAAC;IAEM,KAAK,CAAC,QAAQ,CAAC,OAAqB;QACzC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAC9F,OAAO,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,+BAAa,CAAC,WAAW,CAAC,CAAC,CAAC;IACvE,CAAC;IAEM,KAAK,CAAC,aAAa,CAAC,OAAqB;QAC9C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAC9F,OAAO,MAAM,CAAC,SAAS,EAAE,CAAC;IAC5B,CAAC;IAEM,6BAA6B,CAAC,OAAqB;QACxD,OAAO,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAChE,CAAC;IAEM,6BAA6B,CAAC,IAAgB,EAAE,OAAqB;QAC1E,OAAO,IAAI,CAAC,iBAAiB,CAAC,6BAA6B,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAC7E,CAAC;CACF;AA9BD,kDA8BC","sourcesContent":["import type { MediatorFunctionFactory } from '@comunica/bus-function-factory';\nimport type { MediatorQueryOperation } from '@comunica/bus-query-operation';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { Expression, IActionContext, IExpressionEvaluator, TermExpression } from '@comunica/types';\nimport type { BindingsFactory } from '@comunica/utils-bindings-factory';\nimport type * as RDF from '@rdfjs/types';\nimport { InternalEvaluator } from './InternalEvaluator';\n\nexport class ExpressionEvaluator implements IExpressionEvaluator {\n  private readonly internalEvaluator: InternalEvaluator;\n  public constructor(\n    public readonly context: IActionContext,\n    public readonly expr: Expression,\n    public readonly mediatorFunctionFactory: MediatorFunctionFactory,\n    public readonly mediatorQueryOperation: MediatorQueryOperation,\n    public readonly bindingsFactory: BindingsFactory,\n  ) {\n    this.internalEvaluator =\n      new InternalEvaluator(context, mediatorFunctionFactory, mediatorQueryOperation, bindingsFactory);\n  }\n\n  public async evaluate(mapping: RDF.Bindings): Promise<RDF.Term> {\n    const result = await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr, mapping);\n    return result.toRDF(this.context.getSafe(KeysInitQuery.dataFactory));\n  }\n\n  public async evaluateAsEBV(mapping: RDF.Bindings): Promise<boolean> {\n    const result = await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr, mapping);\n    return result.coerceEBV();\n  }\n\n  public evaluateAsEvaluatorExpression(mapping: RDF.Bindings): Promise<TermExpression> {\n    return this.evaluatorExpressionEvaluation(this.expr, mapping);\n  }\n\n  public evaluatorExpressionEvaluation(expr: Expression, mapping: RDF.Bindings): Promise<TermExpression> {\n    return this.internalEvaluator.evaluatorExpressionEvaluation(expr, mapping);\n  }\n}\n"]}